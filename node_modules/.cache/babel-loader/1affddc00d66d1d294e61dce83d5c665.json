{"ast":null,"code":"var _jsxFileName = \"/Users/meeqatsuharwardy/forms_frontend/src/components/Forms/new_forms/I9/i9.js\";\nimport React, { useState, useEffect } from \"react\";\nimport { PDFDocument } from \"pdf-lib\";\nimport I9 from \"../../../../assets/files/i-9.pdf\";\nexport default function PDFViewer() {\n  const [pdfUrl, setPdfUrl] = useState(null);\n  const [pdfBytes, setPdfBytes] = useState(null); // Store the PDF bytes for submission\n  const [file, setFile] = useState(null); // To hold the uploaded file\n\n  // Load the initial PDF and create a blob URL\n  useEffect(() => {\n    async function loadInitialPDF() {\n      const response = await fetch(I9); // Make sure this path is correct\n      const blob = await response.blob();\n      const url = URL.createObjectURL(blob);\n      setPdfUrl(url);\n    }\n    loadInitialPDF().catch(console.error);\n  }, []);\n  const onFileChange = async event => {\n    const uploadedFile = event.target.files[0];\n    if (uploadedFile) {\n      setFile(uploadedFile); // Save the uploaded file\n      const pdfDoc = await PDFDocument.load(await uploadedFile.arrayBuffer());\n      const pages = pdfDoc.getPages();\n      const firstPage = pages[0];\n      firstPage.drawText(\"This is an edited text!\", {\n        x: 50,\n        y: firstPage.getHeight() - 100,\n        size: 24\n      });\n      const newPdfBytes = await pdfDoc.save();\n      const blob = new Blob([newPdfBytes], {\n        type: \"application/pdf\"\n      });\n      const url = URL.createObjectURL(blob);\n      setPdfUrl(url);\n      setPdfBytes(newPdfBytes);\n    }\n  };\n  const onFormSubmit = async event => {\n    event.preventDefault();\n    if (!file) {\n      alert(\"No file loaded for submission.\");\n      return;\n    }\n    const formData = new FormData();\n    formData.append(\"full_name\", event.target.full_name.value);\n    formData.append(\"date_of_birth\", event.target.date_of_birth.value);\n    formData.append(\"submitted_year\", new Date().getFullYear());\n    formData.append(\"pdf_file\", file, file.name); // Send the uploaded file\n\n    try {\n      const response = await fetch(\"http://127.0.0.1:8000/upload_pdf/\", {\n        method: \"POST\",\n        body: formData\n      });\n      const data = await response.json();\n      alert(\"PDF submitted successfully!\");\n      console.log(data);\n    } catch (error) {\n      console.error(\"Error submitting PDF:\", error);\n      alert(\"Failed to submit PDF.\");\n    }\n  };\n  const downloadPdf = () => {\n    if (!pdfUrl) {\n      alert(\"No PDF available to download.\");\n      return;\n    }\n    const link = document.createElement(\"a\");\n    link.href = pdfUrl;\n    link.download = \"Downloaded.pdf\";\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"file\",\n    onChange: onFileChange,\n    accept: \"application/pdf\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }\n  }), pdfUrl ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"iframe\", {\n    src: pdfUrl,\n    style: {\n      width: \"100%\",\n      height: \"500px\",\n      border: \"none\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: downloadPdf,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 11\n    }\n  }, \"Download PDF\")) : /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 9\n    }\n  }, \"Loading PDF...\"), /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: onFormSubmit,\n    enctype: \"multipart/form-data\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    name: \"full_name\",\n    placeholder: \"Full Name\",\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"date\",\n    name: \"date_of_birth\",\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 9\n    }\n  }, \"Save PDF\")));\n}","map":{"version":3,"names":["React","useState","useEffect","PDFDocument","I9","PDFViewer","pdfUrl","setPdfUrl","pdfBytes","setPdfBytes","file","setFile","loadInitialPDF","response","fetch","blob","url","URL","createObjectURL","catch","console","error","onFileChange","event","uploadedFile","target","files","pdfDoc","load","arrayBuffer","pages","getPages","firstPage","drawText","x","y","getHeight","size","newPdfBytes","save","Blob","type","onFormSubmit","preventDefault","alert","formData","FormData","append","full_name","value","date_of_birth","Date","getFullYear","name","method","body","data","json","log","downloadPdf","link","document","createElement","href","download","appendChild","click","removeChild","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","onChange","accept","Fragment","src","style","width","height","border","onClick","onSubmit","enctype","placeholder","required"],"sources":["/Users/meeqatsuharwardy/forms_frontend/src/components/Forms/new_forms/I9/i9.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { PDFDocument } from \"pdf-lib\";\nimport I9 from \"../../../../assets/files/i-9.pdf\";\n\nexport default function PDFViewer() {\n  const [pdfUrl, setPdfUrl] = useState(null);\n  const [pdfBytes, setPdfBytes] = useState(null); // Store the PDF bytes for submission\n  const [file, setFile] = useState(null); // To hold the uploaded file\n\n  // Load the initial PDF and create a blob URL\n  useEffect(() => {\n    async function loadInitialPDF() {\n      const response = await fetch(I9); // Make sure this path is correct\n      const blob = await response.blob();\n      const url = URL.createObjectURL(blob);\n      setPdfUrl(url);\n    }\n\n    loadInitialPDF().catch(console.error);\n  }, []);\n\n  const onFileChange = async (event) => {\n    const uploadedFile = event.target.files[0];\n    if (uploadedFile) {\n      setFile(uploadedFile); // Save the uploaded file\n      const pdfDoc = await PDFDocument.load(await uploadedFile.arrayBuffer());\n      const pages = pdfDoc.getPages();\n      const firstPage = pages[0];\n      firstPage.drawText(\"This is an edited text!\", {\n        x: 50,\n        y: firstPage.getHeight() - 100,\n        size: 24,\n      });\n\n      const newPdfBytes = await pdfDoc.save();\n      const blob = new Blob([newPdfBytes], { type: \"application/pdf\" });\n      const url = URL.createObjectURL(blob);\n      setPdfUrl(url);\n      setPdfBytes(newPdfBytes);\n    }\n  };\n\n  const onFormSubmit = async (event) => {\n    event.preventDefault();\n    if (!file) {\n      alert(\"No file loaded for submission.\");\n      return;\n    }\n\n    const formData = new FormData();\n    formData.append(\"full_name\", event.target.full_name.value);\n    formData.append(\"date_of_birth\", event.target.date_of_birth.value);\n    formData.append(\"submitted_year\", new Date().getFullYear());\n    formData.append(\"pdf_file\", file, file.name); // Send the uploaded file\n\n    try {\n      const response = await fetch(\"http://127.0.0.1:8000/upload_pdf/\", {\n        method: \"POST\",\n        body: formData,\n      });\n      const data = await response.json();\n      alert(\"PDF submitted successfully!\");\n      console.log(data);\n    } catch (error) {\n      console.error(\"Error submitting PDF:\", error);\n      alert(\"Failed to submit PDF.\");\n    }\n  };\n\n  const downloadPdf = () => {\n    if (!pdfUrl) {\n      alert(\"No PDF available to download.\");\n      return;\n    }\n    const link = document.createElement(\"a\");\n    link.href = pdfUrl;\n    link.download = \"Downloaded.pdf\";\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n  };\n\n  return (\n    <div>\n      <input type=\"file\" onChange={onFileChange} accept=\"application/pdf\" />\n      {pdfUrl ? (\n        <>\n          <iframe\n            src={pdfUrl}\n            style={{ width: \"100%\", height: \"500px\", border: \"none\" }}\n          />\n          <button onClick={downloadPdf}>Download PDF</button>\n        </>\n      ) : (\n        <p>Loading PDF...</p>\n      )}\n      <form onSubmit={onFormSubmit} enctype=\"multipart/form-data\">\n        <input name=\"full_name\" placeholder=\"Full Name\" required />\n        <input type=\"date\" name=\"date_of_birth\" required />\n        <button type=\"submit\">Save PDF</button>\n      </form>\n    </div>\n  );\n}\n"],"mappings":";AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,SAASC,WAAW,QAAQ,SAAS;AACrC,OAAOC,EAAE,MAAM,kCAAkC;AAEjD,eAAe,SAASC,SAASA,CAAA,EAAG;EAClC,MAAM,CAACC,MAAM,EAAEC,SAAS,CAAC,GAAGN,QAAQ,CAAC,IAAI,CAAC;EAC1C,MAAM,CAACO,QAAQ,EAAEC,WAAW,CAAC,GAAGR,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC;EAChD,MAAM,CAACS,IAAI,EAAEC,OAAO,CAAC,GAAGV,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC;;EAExC;EACAC,SAAS,CAAC,MAAM;IACd,eAAeU,cAAcA,CAAA,EAAG;MAC9B,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAACV,EAAE,CAAC,CAAC,CAAC;MAClC,MAAMW,IAAI,GAAG,MAAMF,QAAQ,CAACE,IAAI,CAAC,CAAC;MAClC,MAAMC,GAAG,GAAGC,GAAG,CAACC,eAAe,CAACH,IAAI,CAAC;MACrCR,SAAS,CAACS,GAAG,CAAC;IAChB;IAEAJ,cAAc,CAAC,CAAC,CAACO,KAAK,CAACC,OAAO,CAACC,KAAK,CAAC;EACvC,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMC,YAAY,GAAG,MAAOC,KAAK,IAAK;IACpC,MAAMC,YAAY,GAAGD,KAAK,CAACE,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC;IAC1C,IAAIF,YAAY,EAAE;MAChBb,OAAO,CAACa,YAAY,CAAC,CAAC,CAAC;MACvB,MAAMG,MAAM,GAAG,MAAMxB,WAAW,CAACyB,IAAI,CAAC,MAAMJ,YAAY,CAACK,WAAW,CAAC,CAAC,CAAC;MACvE,MAAMC,KAAK,GAAGH,MAAM,CAACI,QAAQ,CAAC,CAAC;MAC/B,MAAMC,SAAS,GAAGF,KAAK,CAAC,CAAC,CAAC;MAC1BE,SAAS,CAACC,QAAQ,CAAC,yBAAyB,EAAE;QAC5CC,CAAC,EAAE,EAAE;QACLC,CAAC,EAAEH,SAAS,CAACI,SAAS,CAAC,CAAC,GAAG,GAAG;QAC9BC,IAAI,EAAE;MACR,CAAC,CAAC;MAEF,MAAMC,WAAW,GAAG,MAAMX,MAAM,CAACY,IAAI,CAAC,CAAC;MACvC,MAAMxB,IAAI,GAAG,IAAIyB,IAAI,CAAC,CAACF,WAAW,CAAC,EAAE;QAAEG,IAAI,EAAE;MAAkB,CAAC,CAAC;MACjE,MAAMzB,GAAG,GAAGC,GAAG,CAACC,eAAe,CAACH,IAAI,CAAC;MACrCR,SAAS,CAACS,GAAG,CAAC;MACdP,WAAW,CAAC6B,WAAW,CAAC;IAC1B;EACF,CAAC;EAED,MAAMI,YAAY,GAAG,MAAOnB,KAAK,IAAK;IACpCA,KAAK,CAACoB,cAAc,CAAC,CAAC;IACtB,IAAI,CAACjC,IAAI,EAAE;MACTkC,KAAK,CAAC,gCAAgC,CAAC;MACvC;IACF;IAEA,MAAMC,QAAQ,GAAG,IAAIC,QAAQ,CAAC,CAAC;IAC/BD,QAAQ,CAACE,MAAM,CAAC,WAAW,EAAExB,KAAK,CAACE,MAAM,CAACuB,SAAS,CAACC,KAAK,CAAC;IAC1DJ,QAAQ,CAACE,MAAM,CAAC,eAAe,EAAExB,KAAK,CAACE,MAAM,CAACyB,aAAa,CAACD,KAAK,CAAC;IAClEJ,QAAQ,CAACE,MAAM,CAAC,gBAAgB,EAAE,IAAII,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CAAC;IAC3DP,QAAQ,CAACE,MAAM,CAAC,UAAU,EAAErC,IAAI,EAAEA,IAAI,CAAC2C,IAAI,CAAC,CAAC,CAAC;;IAE9C,IAAI;MACF,MAAMxC,QAAQ,GAAG,MAAMC,KAAK,CAAC,mCAAmC,EAAE;QAChEwC,MAAM,EAAE,MAAM;QACdC,IAAI,EAAEV;MACR,CAAC,CAAC;MACF,MAAMW,IAAI,GAAG,MAAM3C,QAAQ,CAAC4C,IAAI,CAAC,CAAC;MAClCb,KAAK,CAAC,6BAA6B,CAAC;MACpCxB,OAAO,CAACsC,GAAG,CAACF,IAAI,CAAC;IACnB,CAAC,CAAC,OAAOnC,KAAK,EAAE;MACdD,OAAO,CAACC,KAAK,CAAC,uBAAuB,EAAEA,KAAK,CAAC;MAC7CuB,KAAK,CAAC,uBAAuB,CAAC;IAChC;EACF,CAAC;EAED,MAAMe,WAAW,GAAGA,CAAA,KAAM;IACxB,IAAI,CAACrD,MAAM,EAAE;MACXsC,KAAK,CAAC,+BAA+B,CAAC;MACtC;IACF;IACA,MAAMgB,IAAI,GAAGC,QAAQ,CAACC,aAAa,CAAC,GAAG,CAAC;IACxCF,IAAI,CAACG,IAAI,GAAGzD,MAAM;IAClBsD,IAAI,CAACI,QAAQ,GAAG,gBAAgB;IAChCH,QAAQ,CAACN,IAAI,CAACU,WAAW,CAACL,IAAI,CAAC;IAC/BA,IAAI,CAACM,KAAK,CAAC,CAAC;IACZL,QAAQ,CAACN,IAAI,CAACY,WAAW,CAACP,IAAI,CAAC;EACjC,CAAC;EAED,oBACE5D,KAAA,CAAA8D,aAAA;IAAAM,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBACEzE,KAAA,CAAA8D,aAAA;IAAOrB,IAAI,EAAC,MAAM;IAACiC,QAAQ,EAAEpD,YAAa;IAACqD,MAAM,EAAC,iBAAiB;IAAAP,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CAAE,CAAC,EACrEnE,MAAM,gBACLN,KAAA,CAAA8D,aAAA,CAAA9D,KAAA,CAAA4E,QAAA,qBACE5E,KAAA,CAAA8D,aAAA;IACEe,GAAG,EAAEvE,MAAO;IACZwE,KAAK,EAAE;MAAEC,KAAK,EAAE,MAAM;MAAEC,MAAM,EAAE,OAAO;MAAEC,MAAM,EAAE;IAAO,CAAE;IAAAb,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CAC3D,CAAC,eACFzE,KAAA,CAAA8D,aAAA;IAAQoB,OAAO,EAAEvB,WAAY;IAAAS,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAC,cAAoB,CAClD,CAAC,gBAEHzE,KAAA,CAAA8D,aAAA;IAAAM,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAG,gBAAiB,CACrB,eACDzE,KAAA,CAAA8D,aAAA;IAAMqB,QAAQ,EAAEzC,YAAa;IAAC0C,OAAO,EAAC,qBAAqB;IAAAhB,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBACzDzE,KAAA,CAAA8D,aAAA;IAAOT,IAAI,EAAC,WAAW;IAACgC,WAAW,EAAC,WAAW;IAACC,QAAQ;IAAAlB,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CAAE,CAAC,eAC3DzE,KAAA,CAAA8D,aAAA;IAAOrB,IAAI,EAAC,MAAM;IAACY,IAAI,EAAC,eAAe;IAACiC,QAAQ;IAAAlB,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CAAE,CAAC,eACnDzE,KAAA,CAAA8D,aAAA;IAAQrB,IAAI,EAAC,QAAQ;IAAA2B,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAC,UAAgB,CAClC,CACH,CAAC;AAEV","ignoreList":[]},"metadata":{},"sourceType":"module"}