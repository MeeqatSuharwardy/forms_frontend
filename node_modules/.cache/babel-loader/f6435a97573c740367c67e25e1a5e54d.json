{"ast":null,"code":"var _jsxFileName = \"/Users/meeqatsuharwardy/forms_frontend/src/components/Forms/new_forms/w4/w4_form.js\";\nimport React, { useState, useEffect } from \"react\";\nimport { PDFDocument } from \"pdf-lib\";\nimport fw4 from \"../../../../assets/files/fw4.pdf\";\nexport default function Fw4PDF() {\n  const [pdfUrl, setPdfUrl] = useState(null);\n  const [file, setFile] = useState(null); // To hold the uploaded file\n\n  // Load the initial PDF and create a blob URL\n  useEffect(() => {\n    async function loadInitialPDF() {\n      const response = await fetch(fw4); // Adjust the path if necessary\n      const blob = await response.blob();\n      const url = URL.createObjectURL(blob);\n      setPdfUrl(url);\n    }\n    loadInitialPDF().catch(console.error);\n  }, []);\n  const onFileChange = async event => {\n    const uploadedFile = event.target.files[0];\n    if (uploadedFile) {\n      setFile(uploadedFile); // Save the uploaded file\n      const pdfDoc = await PDFDocument.load(await uploadedFile.arrayBuffer());\n      const pages = pdfDoc.getPages();\n      const firstPage = pages[0];\n      firstPage.drawText(\"This is an edited text!\", {\n        x: 50,\n        y: firstPage.getHeight() - 100,\n        size: 24\n      });\n      const newPdfBytes = await pdfDoc.save();\n      const blob = new Blob([newPdfBytes], {\n        type: \"application/pdf\"\n      });\n      const url = URL.createObjectURL(blob);\n      setPdfUrl(url);\n    }\n  };\n  const downloadPdf = () => {\n    if (!pdfUrl) {\n      alert(\"No PDF available to download.\");\n      return;\n    }\n    const link = document.createElement(\"a\");\n    link.href = pdfUrl;\n    link.download = \"fw4.pdf\";\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n  };\n  const onFormSubmit = async event => {\n    event.preventDefault();\n    if (!file) {\n      alert(\"No file loaded for submission.\");\n      return;\n    }\n    const formData = new FormData();\n    formData.append(\"full_name\", event.target.full_name.value);\n    formData.append(\"date_of_birth\", event.target.date_of_birth.value);\n    formData.append(\"submitted_year\", new Date().getFullYear());\n    formData.append(\"pdf_file\", file, file.name); // Send the uploaded file\n\n    try {\n      const response = await fetch(\"http://127.0.0.1:8000/upload_pdf/\", {\n        method: \"POST\",\n        body: formData\n      });\n      const data = await response.json();\n      alert(\"PDF submitted successfully!\");\n      console.log(data);\n    } catch (error) {\n      console.error(\"Error submitting PDF:\", error);\n      alert(\"Failed to submit PDF.\");\n    }\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      margin: \"20px 0\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"upload\",\n    style: {\n      marginRight: 10\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 9\n    }\n  }, \"Upload your PDF:\"), /*#__PURE__*/React.createElement(\"input\", {\n    id: \"upload\",\n    type: \"file\",\n    onChange: onFileChange,\n    accept: \"application/pdf\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 9\n    }\n  })), pdfUrl && /*#__PURE__*/React.createElement(\"button\", {\n    onClick: downloadPdf,\n    style: {\n      margin: \"10px\",\n      padding: \"10px 20px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 9\n    }\n  }, \"Download PDF\"), /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: onFormSubmit,\n    enctype: \"multipart/form-data\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    name: \"full_name\",\n    placeholder: \"Full Name\",\n    required: true,\n    style: {\n      marginRight: \"10px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"date\",\n    name: \"date_of_birth\",\n    required: true,\n    style: {\n      marginRight: \"10px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    style: {\n      padding: \"10px 20px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 9\n    }\n  }, \"Save PDF\")));\n}","map":{"version":3,"names":["React","useState","useEffect","PDFDocument","fw4","Fw4PDF","pdfUrl","setPdfUrl","file","setFile","loadInitialPDF","response","fetch","blob","url","URL","createObjectURL","catch","console","error","onFileChange","event","uploadedFile","target","files","pdfDoc","load","arrayBuffer","pages","getPages","firstPage","drawText","x","y","getHeight","size","newPdfBytes","save","Blob","type","downloadPdf","alert","link","document","createElement","href","download","body","appendChild","click","removeChild","onFormSubmit","preventDefault","formData","FormData","append","full_name","value","date_of_birth","Date","getFullYear","name","method","data","json","log","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","style","margin","htmlFor","marginRight","id","onChange","accept","onClick","padding","onSubmit","enctype","placeholder","required"],"sources":["/Users/meeqatsuharwardy/forms_frontend/src/components/Forms/new_forms/w4/w4_form.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { PDFDocument } from \"pdf-lib\";\nimport fw4 from \"../../../../assets/files/fw4.pdf\";\n\nexport default function Fw4PDF() {\n  const [pdfUrl, setPdfUrl] = useState(null);\n  const [file, setFile] = useState(null); // To hold the uploaded file\n\n  // Load the initial PDF and create a blob URL\n  useEffect(() => {\n    async function loadInitialPDF() {\n      const response = await fetch(fw4); // Adjust the path if necessary\n      const blob = await response.blob();\n      const url = URL.createObjectURL(blob);\n      setPdfUrl(url);\n    }\n\n    loadInitialPDF().catch(console.error);\n  }, []);\n\n  const onFileChange = async (event) => {\n    const uploadedFile = event.target.files[0];\n    if (uploadedFile) {\n      setFile(uploadedFile); // Save the uploaded file\n      const pdfDoc = await PDFDocument.load(await uploadedFile.arrayBuffer());\n      const pages = pdfDoc.getPages();\n      const firstPage = pages[0];\n      firstPage.drawText(\"This is an edited text!\", {\n        x: 50,\n        y: firstPage.getHeight() - 100,\n        size: 24,\n      });\n\n      const newPdfBytes = await pdfDoc.save();\n      const blob = new Blob([newPdfBytes], { type: \"application/pdf\" });\n      const url = URL.createObjectURL(blob);\n      setPdfUrl(url);\n    }\n  };\n\n  const downloadPdf = () => {\n    if (!pdfUrl) {\n      alert(\"No PDF available to download.\");\n      return;\n    }\n    const link = document.createElement(\"a\");\n    link.href = pdfUrl;\n    link.download = \"fw4.pdf\";\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n  };\n\n  const onFormSubmit = async (event) => {\n    event.preventDefault();\n    if (!file) {\n      alert(\"No file loaded for submission.\");\n      return;\n    }\n\n    const formData = new FormData();\n    formData.append(\"full_name\", event.target.full_name.value);\n    formData.append(\"date_of_birth\", event.target.date_of_birth.value);\n    formData.append(\"submitted_year\", new Date().getFullYear());\n    formData.append(\"pdf_file\", file, file.name); // Send the uploaded file\n\n    try {\n      const response = await fetch(\"http://127.0.0.1:8000/upload_pdf/\", {\n        method: \"POST\",\n        body: formData,\n      });\n      const data = await response.json();\n      alert(\"PDF submitted successfully!\");\n      console.log(data);\n    } catch (error) {\n      console.error(\"Error submitting PDF:\", error);\n      alert(\"Failed to submit PDF.\");\n    }\n  };\n\n  return (\n    <div>\n      <div style={{ margin: \"20px 0\" }}>\n        <label htmlFor=\"upload\" style={{ marginRight: 10 }}>\n          Upload your PDF:\n        </label>\n        <input\n          id=\"upload\"\n          type=\"file\"\n          onChange={onFileChange}\n          accept=\"application/pdf\"\n        />\n      </div>\n      {pdfUrl && (\n        <button\n          onClick={downloadPdf}\n          style={{ margin: \"10px\", padding: \"10px 20px\" }}\n        >\n          Download PDF\n        </button>\n      )}\n      <form onSubmit={onFormSubmit} enctype=\"multipart/form-data\">\n        <input\n          name=\"full_name\"\n          placeholder=\"Full Name\"\n          required\n          style={{ marginRight: \"10px\" }}\n        />\n        <input\n          type=\"date\"\n          name=\"date_of_birth\"\n          required\n          style={{ marginRight: \"10px\" }}\n        />\n        <button type=\"submit\" style={{ padding: \"10px 20px\" }}>\n          Save PDF\n        </button>\n      </form>\n    </div>\n  );\n}\n"],"mappings":";AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,SAASC,WAAW,QAAQ,SAAS;AACrC,OAAOC,GAAG,MAAM,kCAAkC;AAElD,eAAe,SAASC,MAAMA,CAAA,EAAG;EAC/B,MAAM,CAACC,MAAM,EAAEC,SAAS,CAAC,GAAGN,QAAQ,CAAC,IAAI,CAAC;EAC1C,MAAM,CAACO,IAAI,EAAEC,OAAO,CAAC,GAAGR,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC;;EAExC;EACAC,SAAS,CAAC,MAAM;IACd,eAAeQ,cAAcA,CAAA,EAAG;MAC9B,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAACR,GAAG,CAAC,CAAC,CAAC;MACnC,MAAMS,IAAI,GAAG,MAAMF,QAAQ,CAACE,IAAI,CAAC,CAAC;MAClC,MAAMC,GAAG,GAAGC,GAAG,CAACC,eAAe,CAACH,IAAI,CAAC;MACrCN,SAAS,CAACO,GAAG,CAAC;IAChB;IAEAJ,cAAc,CAAC,CAAC,CAACO,KAAK,CAACC,OAAO,CAACC,KAAK,CAAC;EACvC,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMC,YAAY,GAAG,MAAOC,KAAK,IAAK;IACpC,MAAMC,YAAY,GAAGD,KAAK,CAACE,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC;IAC1C,IAAIF,YAAY,EAAE;MAChBb,OAAO,CAACa,YAAY,CAAC,CAAC,CAAC;MACvB,MAAMG,MAAM,GAAG,MAAMtB,WAAW,CAACuB,IAAI,CAAC,MAAMJ,YAAY,CAACK,WAAW,CAAC,CAAC,CAAC;MACvE,MAAMC,KAAK,GAAGH,MAAM,CAACI,QAAQ,CAAC,CAAC;MAC/B,MAAMC,SAAS,GAAGF,KAAK,CAAC,CAAC,CAAC;MAC1BE,SAAS,CAACC,QAAQ,CAAC,yBAAyB,EAAE;QAC5CC,CAAC,EAAE,EAAE;QACLC,CAAC,EAAEH,SAAS,CAACI,SAAS,CAAC,CAAC,GAAG,GAAG;QAC9BC,IAAI,EAAE;MACR,CAAC,CAAC;MAEF,MAAMC,WAAW,GAAG,MAAMX,MAAM,CAACY,IAAI,CAAC,CAAC;MACvC,MAAMxB,IAAI,GAAG,IAAIyB,IAAI,CAAC,CAACF,WAAW,CAAC,EAAE;QAAEG,IAAI,EAAE;MAAkB,CAAC,CAAC;MACjE,MAAMzB,GAAG,GAAGC,GAAG,CAACC,eAAe,CAACH,IAAI,CAAC;MACrCN,SAAS,CAACO,GAAG,CAAC;IAChB;EACF,CAAC;EAED,MAAM0B,WAAW,GAAGA,CAAA,KAAM;IACxB,IAAI,CAAClC,MAAM,EAAE;MACXmC,KAAK,CAAC,+BAA+B,CAAC;MACtC;IACF;IACA,MAAMC,IAAI,GAAGC,QAAQ,CAACC,aAAa,CAAC,GAAG,CAAC;IACxCF,IAAI,CAACG,IAAI,GAAGvC,MAAM;IAClBoC,IAAI,CAACI,QAAQ,GAAG,SAAS;IACzBH,QAAQ,CAACI,IAAI,CAACC,WAAW,CAACN,IAAI,CAAC;IAC/BA,IAAI,CAACO,KAAK,CAAC,CAAC;IACZN,QAAQ,CAACI,IAAI,CAACG,WAAW,CAACR,IAAI,CAAC;EACjC,CAAC;EAED,MAAMS,YAAY,GAAG,MAAO9B,KAAK,IAAK;IACpCA,KAAK,CAAC+B,cAAc,CAAC,CAAC;IACtB,IAAI,CAAC5C,IAAI,EAAE;MACTiC,KAAK,CAAC,gCAAgC,CAAC;MACvC;IACF;IAEA,MAAMY,QAAQ,GAAG,IAAIC,QAAQ,CAAC,CAAC;IAC/BD,QAAQ,CAACE,MAAM,CAAC,WAAW,EAAElC,KAAK,CAACE,MAAM,CAACiC,SAAS,CAACC,KAAK,CAAC;IAC1DJ,QAAQ,CAACE,MAAM,CAAC,eAAe,EAAElC,KAAK,CAACE,MAAM,CAACmC,aAAa,CAACD,KAAK,CAAC;IAClEJ,QAAQ,CAACE,MAAM,CAAC,gBAAgB,EAAE,IAAII,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CAAC;IAC3DP,QAAQ,CAACE,MAAM,CAAC,UAAU,EAAE/C,IAAI,EAAEA,IAAI,CAACqD,IAAI,CAAC,CAAC,CAAC;;IAE9C,IAAI;MACF,MAAMlD,QAAQ,GAAG,MAAMC,KAAK,CAAC,mCAAmC,EAAE;QAChEkD,MAAM,EAAE,MAAM;QACdf,IAAI,EAAEM;MACR,CAAC,CAAC;MACF,MAAMU,IAAI,GAAG,MAAMpD,QAAQ,CAACqD,IAAI,CAAC,CAAC;MAClCvB,KAAK,CAAC,6BAA6B,CAAC;MACpCvB,OAAO,CAAC+C,GAAG,CAACF,IAAI,CAAC;IACnB,CAAC,CAAC,OAAO5C,KAAK,EAAE;MACdD,OAAO,CAACC,KAAK,CAAC,uBAAuB,EAAEA,KAAK,CAAC;MAC7CsB,KAAK,CAAC,uBAAuB,CAAC;IAChC;EACF,CAAC;EAED,oBACEzC,KAAA,CAAA4C,aAAA;IAAAsB,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBACEvE,KAAA,CAAA4C,aAAA;IAAK4B,KAAK,EAAE;MAAEC,MAAM,EAAE;IAAS,CAAE;IAAAP,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBAC/BvE,KAAA,CAAA4C,aAAA;IAAO8B,OAAO,EAAC,QAAQ;IAACF,KAAK,EAAE;MAAEG,WAAW,EAAE;IAAG,CAAE;IAAAT,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAC,kBAE7C,CAAC,eACRvE,KAAA,CAAA4C,aAAA;IACEgC,EAAE,EAAC,QAAQ;IACXrC,IAAI,EAAC,MAAM;IACXsC,QAAQ,EAAEzD,YAAa;IACvB0D,MAAM,EAAC,iBAAiB;IAAAZ,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CACzB,CACE,CAAC,EACLjE,MAAM,iBACLN,KAAA,CAAA4C,aAAA;IACEmC,OAAO,EAAEvC,WAAY;IACrBgC,KAAK,EAAE;MAAEC,MAAM,EAAE,MAAM;MAAEO,OAAO,EAAE;IAAY,CAAE;IAAAd,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GACjD,cAEO,CACT,eACDvE,KAAA,CAAA4C,aAAA;IAAMqC,QAAQ,EAAE9B,YAAa;IAAC+B,OAAO,EAAC,qBAAqB;IAAAhB,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBACzDvE,KAAA,CAAA4C,aAAA;IACEiB,IAAI,EAAC,WAAW;IAChBsB,WAAW,EAAC,WAAW;IACvBC,QAAQ;IACRZ,KAAK,EAAE;MAAEG,WAAW,EAAE;IAAO,CAAE;IAAAT,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CAChC,CAAC,eACFvE,KAAA,CAAA4C,aAAA;IACEL,IAAI,EAAC,MAAM;IACXsB,IAAI,EAAC,eAAe;IACpBuB,QAAQ;IACRZ,KAAK,EAAE;MAAEG,WAAW,EAAE;IAAO,CAAE;IAAAT,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CAChC,CAAC,eACFvE,KAAA,CAAA4C,aAAA;IAAQL,IAAI,EAAC,QAAQ;IAACiC,KAAK,EAAE;MAAEQ,OAAO,EAAE;IAAY,CAAE;IAAAd,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAC,UAE/C,CACJ,CACH,CAAC;AAEV","ignoreList":[]},"metadata":{},"sourceType":"module"}